import{Q as z,a as B}from"./QCardSection-dc3e7f67.js";import{Q as y}from"./QBtn-68e1acb0.js";import{Q as S}from"./QCardActions-ed4d83c5.js";import{Q as V}from"./QDialog-311997ce.js";import{b as $,Q as P,a as f}from"./QTable-9ac0a07c.js";import{d as I,aw as M,r,a6 as N,X as A,e as a,b as l,o as x,g as u,k as _,O as F,c as L,W as h,Q as g,ax as U,_ as q}from"./index-e5e9097c.js";import{C as H}from"./ClosePopup-60e3f706.js";import{u as R}from"./use-key-composition-03035ab4.js";import{A as C}from"./AssistanceService-41b69bbf.js";import"./use-prevent-scroll-86cdee42.js";import"./scroll-49674bee.js";import"./use-timeout-218cbdd7.js";import"./use-tick-355e26fc.js";import"./focus-manager-e79c27be.js";import"./QList-da38b722.js";import"./QMarkupTable-4af7c470.js";import"./QCheckbox-332c8a72.js";import"./QChip-0dfdefb8.js";import"./selection-cf2d6bd0.js";import"./QItemLabel-9b5420d3.js";import"./rtl-36dd996b.js";import"./format-7389883c.js";import"./QLinearProgress-3da691dc.js";import"./uid-6a237b22.js";const E={class:"container"},O=I({__name:"Test",setup(W){const k=M(),d=r(!1),i=r([]),m=r(""),c=r(!1),s=r({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),Q=[{name:"index",label:"Номер",align:"left",field:"index",headerStyle:"font-size: 1.1em;"},{name:"fio",label:"ФИО",align:"left",field:"fio",headerStyle:"font-size: 1.1em;",sortable:!0,sort:(t,e)=>t.localeCompare(e)},{name:"buttons",label:"Действия",align:"center",field:"buttons",headerStyle:"font-size: 1.1em;"}],{f:w,loading:T}=R({fn:()=>C.deleteFormById(m.value).then(()=>{var t;b(),i.value=(t=i.value)==null?void 0:t.filter(e=>e._id!==m.value)}),alert:!0,successMsg:"Удалено"});N(()=>v({pagination:s.value}));async function v(t){try{d.value=!0;const{page:e,rowsPerPage:o}=t.pagination,n=await C.catchHumansList({limit:o,page:e});i.value.splice(0,i.value.length,...n.data),s.value.page=e,s.value.rowsNumber=+n.headers["x-total-count"]}catch(e){console.log(e)}finally{d.value=!1}}function D(t){k.push({path:"/info",query:{search:t}})}function b(t){t&&(m.value=t),c.value=!c.value}return(t,e)=>(x(),A("div",E,[a(V,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=o=>c.value=o)},{default:l(()=>[a(z,{style:{padding:"10px","min-width":"250px"}},{default:l(()=>[a(B,{class:"text-h6 text-center"},{default:l(()=>[u("Вы уверены?")]),_:1}),a(S,{align:"between"},{default:l(()=>[a(y,{onClick:_(w),loading:_(T),color:"primary"},{default:l(()=>[u("Да")]),_:1},8,["onClick","loading"]),F((x(),L(y,{color:"primary"},{default:l(()=>[u("Нет")]),_:1})),[[H]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{class:"table",columns:Q,rows:i.value,loading:d.value,"rows-per-page-options":[5],"pagination-label":(o,n,p)=>`${o}-${n} из ${p}`,"no-data-label":"Ничего не найдено","row-key":"index",separator:"cell",title:"Полный список",pagination:s.value,"onUpdate:pagination":e[1]||(e[1]=o=>s.value=o),onRequest:v},{body:l(({row:o,rowIndex:n})=>[a(P,null,{default:l(()=>[a(f,{key:"name","auto-width":""},{default:l(()=>[u(h(n+1),1)]),_:2},1024),a(f,{key:"fio"},{default:l(()=>[u(h(o.fio),1)]),_:2},1024),a(f,{class:"item_btns",key:"buttons","auto-width":""},{default:l(()=>[a(g,{name:"content_copy",size:"20px",onClick:p=>_(U).copyTextToClipboard(o.fio)},null,8,["onClick"]),a(g,{name:"search",size:"20px",onClick:p=>D(o.fio.split(" ")[0])},null,8,["onClick"]),a(g,{name:"delete",size:"20px",onClick:p=>[b(o._id)]},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","loading","pagination-label","pagination"])]))}});const ve=q(O,[["__scopeId","data-v-0a0c64b1"]]);export{ve as default};
