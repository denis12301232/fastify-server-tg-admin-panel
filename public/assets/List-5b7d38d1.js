import{Q as I,b as F}from"./QCardSection-d26faa53.js";import{Q as h}from"./QBtn-84d97db2.js";import{Q as M}from"./QCardActions-d42c9939.js";import{Q as N}from"./QDialog-db694845.js";import{Q as U}from"./QInput-f9d1dd50.js";import{Q as A,a as f,b as $}from"./QTable-8b09335a.js";import{d as E,aw as P,r as i,n as j,w as q,c as b,b as o,o as _,f as R,e as t,g as n,k as s,E as G,a2 as C,Q as v,ax as J,a3 as K,a1 as O,_ as W}from"./index-daaabc4f.js";import{Q as X}from"./QPagination-805258df.js";import{C as Y}from"./ClosePopup-261f1e7e.js";import{H as Z}from"./HeaderLayout-a6dad372.js";import{u as Q}from"./use-key-composition-88659357.js";import{A as k}from"./AssistanceService-05956a1b.js";import"./use-prevent-scroll-f90505a2.js";import"./scroll-f9fbc6b4.js";import"./use-timeout-af311404.js";import"./TouchPan-ab0145b5.js";import"./selection-a01cad79.js";import"./format-7389883c.js";import"./use-tick-b9bb58f2.js";import"./focus-manager-e79c27be.js";import"./QList-bcae5e36.js";import"./QMarkupTable-aa9d6225.js";import"./QCheckbox-a46065f7.js";import"./QChip-5ca0a42f.js";import"./QItemLabel-c4ac9f6a.js";import"./rtl-36dd996b.js";import"./QLinearProgress-f811b116.js";import"./QLayout-3fbeca0d.js";import"./uid-6a237b22.js";const ee={class:"container"},te={key:0,style:{display:"flex","justify-content":"center","margin-top":"20px"}},ae=E({__name:"List",setup(oe){const V=[{name:"index",label:"Номер",align:"left",field:"index",headerStyle:"font-size: 1.1em;"},{name:"fio",label:"ФИО",align:"left",field:"fio",headerStyle:"font-size: 1.1em;",sortable:!0,sort:(e,a)=>e.localeCompare(a)},{name:"buttons",label:"Действия",align:"center",field:"buttons",headerStyle:"font-size: 1.1em;"}],w=P(),r=i(1),d=i(""),m=i(0),y=i(10),c=i(""),u=i(!1),L=j(()=>{var e;return(e=p.value)==null?void 0:e.filter(a=>a.fio.toLowerCase().includes(d.value.toLowerCase()))}),{f:D,loading:z}=Q({fn:()=>k.deleteFormById(c.value).then(()=>{var e;g(),p.value=(e=p.value)==null?void 0:e.filter(a=>a._id!==c.value)}),alert:!0,successMsg:"Удалено"}),{f:B,data:p,loading:S}=Q({fn:()=>k.catchHumansList({limit:y.value,page:r.value}).then(e=>(m.value=Math.ceil(+e.headers["x-total-count"]/y.value),e))});q(r,()=>{B()},{immediate:!0});function g(e){e&&(c.value=e),u.value=!u.value}function T(e){w.push({path:"/info",query:{search:e}})}return(e,a)=>(_(),b(Z,null,{default:o(()=>[R("div",ee,[t(N,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=l=>u.value=l)},{default:o(()=>[t(I,{style:{padding:"10px","min-width":"250px"}},{default:o(()=>[t(F,{class:"text-h6 text-center"},{default:o(()=>[n("Вы уверены?")]),_:1}),t(M,{align:"between"},{default:o(()=>[t(h,{onClick:s(D),loading:s(z),color:"primary"},{default:o(()=>[n("Да")]),_:1},8,["onClick","loading"]),G((_(),b(h,{color:"primary"},{default:o(()=>[n("Нет")]),_:1})),[[Y]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(U,{modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=l=>d.value=l),outlined:"",label:"Поиск",style:{"margin-top":"20px"}},null,8,["modelValue"]),t($,{class:"table",rows:s(L),columns:V,"binary-state-sort":"",separator:"cell","row-key":"index","hide-pagination":"",loading:s(S),"no-data-label":"Ничего не найдено"},{body:o(({row:l,rowIndex:H})=>[t(A,null,{default:o(()=>[t(f,{key:"name","auto-width":""},{default:o(()=>[n(C(H+1),1)]),_:2},1024),t(f,{key:"fio"},{default:o(()=>[n(C(l.fio),1)]),_:2},1024),t(f,{class:"item_btns",key:"buttons","auto-width":""},{default:o(()=>[t(v,{name:"content_copy",size:"20px",onClick:x=>s(J).copyTextToClipboard(l.fio)},null,8,["onClick"]),t(v,{name:"search",size:"20px",onClick:x=>T(l.fio.split(" ")[0])},null,8,["onClick"]),t(v,{name:"delete",size:"20px",onClick:x=>[g(l._id)]},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","loading"]),m.value>1?(_(),K("div",te,[t(X,{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=l=>r.value=l),max:m.value,"direction-links":"",flat:"",color:"grey","active-color":"primary"},null,8,["modelValue","max"])])):O("",!0)])]),_:1}))}});const He=W(ae,[["__scopeId","data-v-73e26cd3"]]);export{He as default};
