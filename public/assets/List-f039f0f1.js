import{Q as N,b as P}from"./QCardSection-3b578b19.js";import{Q as h}from"./QBtn-0ee999ef.js";import{Q as F}from"./QCardActions-0a53e676.js";import{Q as H}from"./QDialog-3d99a067.js";import{Q as I,a as v,b as M}from"./QTable-421ad203.js";import{d as A,aw as U,r as u,B as q,c as k,b as l,o as Q,f as R,e as a,g as d,k as _,E,a2 as w,Q as y,ax as j,_ as G}from"./index-9a19f992.js";import{C as J}from"./ClosePopup-1ce16fbc.js";import{H as K}from"./HeaderLayout-59520248.js";import{u as O}from"./use-key-composition-8f576511.js";import{A as B}from"./AssistanceService-1b062d8e.js";import"./use-prevent-scroll-875d3428.js";import"./scroll-14701fa6.js";import"./use-timeout-3df8cc56.js";import"./TouchPan-fb10d4ce.js";import"./selection-a8f71125.js";import"./format-7389883c.js";import"./use-tick-80df463e.js";import"./focus-manager-e79c27be.js";import"./QList-4822b7bb.js";import"./QMarkupTable-fbd3168a.js";import"./QCheckbox-631a0f6b.js";import"./QChip-53b21909.js";import"./QItemLabel-54427fb4.js";import"./rtl-36dd996b.js";import"./QLinearProgress-9fefdb74.js";import"./QLayout-5cd944ea.js";import"./uid-6a237b22.js";const W={class:"container"},X=A({__name:"List",setup(Y){const D=U(),p=u(!1),r=u([]),L=u(""),m=u(""),c=u(!1),i=u({sortBy:"desc",descending:!0,page:1,rowsPerPage:10,rowsNumber:0}),V=[{name:"index",label:"Номер",align:"left",field:"index",headerStyle:"font-size: 1.1em;"},{name:"fio",label:"ФИО",align:"left",field:"fio",headerStyle:"font-size: 1.1em;",sortable:!0,sort:(t,e)=>t.localeCompare(e)},{name:"buttons",label:"Действия",align:"center",field:"buttons",headerStyle:"font-size: 1.1em;"}],{f:z,loading:S}=O({fn:()=>B.deleteFormById(m.value).then(()=>{var t;x(),r.value=(t=r.value)==null?void 0:t.filter(e=>e._id!==m.value)}),alert:!0,successMsg:"Удалено"});q(()=>b({pagination:i.value}));async function b(t){try{p.value=!0;const{page:e,rowsPerPage:o,sortBy:n,descending:s}=t.pagination;if(n&&s!==i.value.descending){const $=s?(f,g)=>g[n].localeCompare(f[n]):(f,g)=>f[n].localeCompare(g[n]);r.value.sort($),i.value.descending=s,i.value.sortBy=n;return}const C=await B.catchHumansList({limit:o,page:e});r.value.splice(0,r.value.length,...C.data),i.value.descending=s,i.value.sortBy=n,i.value.page=e,i.value.rowsNumber=+C.headers["x-total-count"]}catch(e){console.log(e)}finally{p.value=!1}}function T(t){D.push({path:"/info",query:{search:t}})}function x(t){t&&(m.value=t),c.value=!c.value}return(t,e)=>(Q(),k(K,null,{default:l(()=>[R("div",W,[a(H,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=o=>c.value=o)},{default:l(()=>[a(N,{style:{padding:"10px","min-width":"250px"}},{default:l(()=>[a(P,{class:"text-h6 text-center"},{default:l(()=>[d("Вы уверены?")]),_:1}),a(F,{align:"between"},{default:l(()=>[a(h,{onClick:_(z),loading:_(S),color:"primary"},{default:l(()=>[d("Да")]),_:1},8,["onClick","loading"]),E((Q(),k(h,{color:"primary"},{default:l(()=>[d("Нет")]),_:1})),[[J]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(M,{class:"table",columns:V,rows:r.value,loading:p.value,"rows-per-page-options":[5],"pagination-label":(o,n,s)=>`${o}-${n} из ${s}`,filter:L.value,"binary-state-sort":"","no-data-label":"Ничего не найдено","row-key":"index",separator:"cell",title:"Полный список",pagination:i.value,"onUpdate:pagination":e[1]||(e[1]=o=>i.value=o),onRequest:b},{body:l(({row:o,rowIndex:n})=>[a(I,null,{default:l(()=>[a(v,{key:"name","auto-width":""},{default:l(()=>[d(w(n+1),1)]),_:2},1024),a(v,{key:"fio"},{default:l(()=>[d(w(o.fio),1)]),_:2},1024),a(v,{class:"item_btns",key:"buttons","auto-width":""},{default:l(()=>[a(y,{name:"content_copy",size:"20px",onClick:s=>_(j).copyTextToClipboard(o.fio)},null,8,["onClick"]),a(y,{name:"search",size:"20px",onClick:s=>T(o.fio.split(" ")[0])},null,8,["onClick"]),a(y,{name:"delete",size:"20px",onClick:s=>[x(o._id)]},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","loading","pagination-label","filter","pagination"])])]),_:1}))}});const Be=G(X,[["__scopeId","data-v-e72f274e"]]);export{Be as default};
