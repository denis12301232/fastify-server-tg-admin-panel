import{Q as C}from"./QInput-a064f86b.js";import{Q as q}from"./QBtn-68e1acb0.js";import{Q as k}from"./QPagination-4d3dbc32.js";import{d as F,aw as M,aB as N,r as _,a6 as A,w as T,c as v,b as y,o as l,f as a,h as U,k as o,e as d,g as $,V as b,X as p,a3 as Q,a4 as I,W as h,Q as j,Y as H,p as L,i as R,_ as z}from"./index-e5e9097c.js";import{Q as D}from"./QMarkupTable-4af7c470.js";import{H as E}from"./HeaderLayout-d9682e6c.js";import{u as P}from"./use-key-composition-03035ab4.js";import{u as W}from"./useBeautifyAssistance-d4d71ecc.js";import{A as X}from"./AssistanceService-41b69bbf.js";import"./focus-manager-e79c27be.js";import"./format-7389883c.js";import"./QLayout-f9a4666d.js";import"./scroll-49674bee.js";import"./selection-cf2d6bd0.js";import"./QList-da38b722.js";import"./QAvatar-61289a0c.js";import"./use-prevent-scroll-86cdee42.js";import"./use-timeout-218cbdd7.js";import"./TouchPan-cd2fd977.js";import"./QCardSection-dc3e7f67.js";import"./uid-6a237b22.js";const Y=n=>(L("data-v-954f8a1c"),n=n(),R(),n),G={class:"container"},J=Y(()=>a("h4",{class:"title"},"Поиск",-1)),K={style:{display:"flex","justify-content":"center","margin-top":"20px"}},O={style:{"margin-bottom":"10px"}},Z={class:"finded"},ee={class:"text-h6 q-mb-sm"},te={style:{display:"flex","justify-content":"center","margin-top":"20px"}},oe=F({__name:"Info",setup(n){var x;const g=M(),w=N(),u=_(0),i=_(1),s=_(((x=w.query.search)==null?void 0:x.toString())||""),{f:m,error:c,loading:B,data:f}=P({fn:()=>X.getForms(s.value,1,i.value).then(r=>(u.value=u.value=Math.ceil(+r.headers["x-total-count"]/1),r)),errorMsg:"Ничего не найдено"});return A(()=>{s.value&&m()}),T([s,i],(r,e)=>{c.value="",r[0]!==e[0]&&g.push({query:{search:s.value}}),r[1]!==e[1]&&m().then(()=>{window.scrollTo(0,0)}),r[0]||g.push({query:void 0})}),(r,e)=>(l(),v(E,null,{default:y(()=>[a("div",G,[J,a("form",{class:"form",onSubmit:e[1]||(e[1]=U((...t)=>o(m)&&o(m)(...t),["prevent"]))},[d(C,{class:"form_input",modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value=t),outlined:"",label:"Имя или фамилия",error:!!o(c),"error-message":o(c)},null,8,["modelValue","error","error-message"]),d(q,{color:"primary",type:"submit",loading:o(B),disable:!s.value},{default:y(()=>[$("Найти")]),_:1},8,["loading","disable"])],32),a("div",K,[o(f)?(l(),v(k,{key:0,modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value=t),max:u.value,"direction-links":"",flat:"",color:"grey","active-color":"primary"},null,8,["modelValue","max"])):b("",!0)]),(l(!0),p(I,null,Q(o(f),t=>(l(),p("div",O,[a("div",Z,[a("div",ee,"Найдено: "+h(t.form.surname),1),d(j,{name:"edit",size:"20px",onClick:V=>r.$router.push({path:`/list/${t._id}`,query:{edit:"true"}})},null,8,["onClick"])]),d(D,null,{default:y(()=>[a("tbody",null,[(l(!0),p(I,null,Q(t.form,(V,S)=>(l(),p("tr",null,[a("td",null,h(o(H).assistance[S]),1),a("td",null,h(o(W)(V)),1)]))),256))])]),_:2},1024)]))),256)),a("div",te,[o(f)?(l(),v(k,{key:0,modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value=t),max:u.value,"direction-links":"",flat:"",color:"grey","active-color":"primary"},null,8,["modelValue","max"])):b("",!0)])])]),_:1}))}});const Ie=z(oe,[["__scopeId","data-v-954f8a1c"]]);export{Ie as default};
