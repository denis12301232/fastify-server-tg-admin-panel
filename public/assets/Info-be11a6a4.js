import{Q as C}from"./QInput-6860a998.js";import{Q as q}from"./QBtn-0e6d397d.js";import{Q as k}from"./QPagination-33e1727d.js";import{d as F,aw as M,aB as N,r as _,B as A,w as T,c as v,b as y,o as l,f as a,h as U,k as o,e as d,g as $,a1 as b,a3 as p,a9 as Q,aa as I,a2 as h,Q as j,a4 as H,p as L,i as R,_ as z}from"./index-06f4354f.js";import{Q as D}from"./QMarkupTable-ee18c591.js";import{H as E}from"./HeaderLayout-85bf34ca.js";import{u as P}from"./use-key-composition-a98e307f.js";import{u as G}from"./useBeautifyAssistance-d4d71ecc.js";import{A as J}from"./AssistanceService-f856ec35.js";import"./focus-manager-e79c27be.js";import"./use-dark-70e23e67.js";import"./format-7389883c.js";import"./QLayout-579f38f1.js";import"./scroll-5c350fea.js";import"./selection-9c6333d4.js";import"./QList-86951a94.js";import"./QCardSection-99246931.js";import"./use-prevent-scroll-ecde5974.js";import"./use-timeout-a2c402f4.js";import"./TouchPan-ce722b71.js";import"./uid-6a237b22.js";const K=n=>(L("data-v-954f8a1c"),n=n(),R(),n),O={class:"container"},W=K(()=>a("h4",{class:"title"},"Поиск",-1)),X={style:{display:"flex","justify-content":"center","margin-top":"20px"}},Y={style:{"margin-bottom":"10px"}},Z={class:"finded"},ee={class:"text-h6 q-mb-sm"},te={style:{display:"flex","justify-content":"center","margin-top":"20px"}},oe=F({__name:"Info",setup(n){var x;const g=M(),w=N(),u=_(0),i=_(1),s=_(((x=w.query.search)==null?void 0:x.toString())||""),{f:m,error:c,loading:B,data:f}=P({fn:()=>J.getForms(s.value,1,i.value).then(r=>(u.value=u.value=Math.ceil(+r.headers["x-total-count"]/1),r)),errorMsg:"Ничего не найдено"});return A(()=>{s.value&&m()}),T([s,i],(r,e)=>{c.value="",r[0]!==e[0]&&g.push({query:{search:s.value}}),r[1]!==e[1]&&m().then(()=>{window.scrollTo(0,0)}),r[0]||g.push({query:void 0})}),(r,e)=>(l(),v(E,null,{default:y(()=>[a("div",O,[W,a("form",{class:"form",onSubmit:e[1]||(e[1]=U((...t)=>o(m)&&o(m)(...t),["prevent"]))},[d(C,{class:"form_input",modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value=t),outlined:"",label:"Имя или фамилия",error:!!o(c),"error-message":o(c)},null,8,["modelValue","error","error-message"]),d(q,{color:"primary",type:"submit",loading:o(B),disable:!s.value},{default:y(()=>[$("Найти")]),_:1},8,["loading","disable"])],32),a("div",X,[o(f)?(l(),v(k,{key:0,modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value=t),max:u.value,"direction-links":"",flat:"",color:"grey","active-color":"primary"},null,8,["modelValue","max"])):b("",!0)]),(l(!0),p(I,null,Q(o(f),t=>(l(),p("div",Y,[a("div",Z,[a("div",ee,"Найдено: "+h(t.form.surname),1),d(j,{name:"edit",size:"20px",onClick:V=>r.$router.push({path:`/list/${t._id}`,query:{edit:"true"}})},null,8,["onClick"])]),d(D,null,{default:y(()=>[a("tbody",null,[(l(!0),p(I,null,Q(t.form,(V,S)=>(l(),p("tr",null,[a("td",null,h(o(H).assistance[S]),1),a("td",null,h(o(G)(V)),1)]))),256))])]),_:2},1024)]))),256)),a("div",te,[o(f)?(l(),v(k,{key:0,modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value=t),max:u.value,"direction-links":"",flat:"",color:"grey","active-color":"primary"},null,8,["modelValue","max"])):b("",!0)])])]),_:1}))}});const Ie=z(oe,[["__scopeId","data-v-954f8a1c"]]);export{Ie as default};
