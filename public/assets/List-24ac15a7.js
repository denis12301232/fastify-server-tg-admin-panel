import{Q as N,a as P}from"./QCardSection-dc3e7f67.js";import{Q as h}from"./QBtn-68e1acb0.js";import{Q as F}from"./QCardActions-ed4d83c5.js";import{Q as H}from"./QDialog-311997ce.js";import{Q as I,a as v,b as M}from"./QTable-9ac0a07c.js";import{d as A,aw as U,r as u,a6 as q,c as k,b as l,o as Q,f as R,e as a,g as d,k as _,O,W as w,Q as y,ax as W,_ as j}from"./index-e5e9097c.js";import{C as E}from"./ClosePopup-60e3f706.js";import{H as G}from"./HeaderLayout-d9682e6c.js";import{u as J}from"./use-key-composition-03035ab4.js";import{A as B}from"./AssistanceService-41b69bbf.js";import"./use-prevent-scroll-86cdee42.js";import"./scroll-49674bee.js";import"./use-timeout-218cbdd7.js";import"./use-tick-355e26fc.js";import"./focus-manager-e79c27be.js";import"./QList-da38b722.js";import"./QMarkupTable-4af7c470.js";import"./QCheckbox-332c8a72.js";import"./QChip-0dfdefb8.js";import"./selection-cf2d6bd0.js";import"./QItemLabel-9b5420d3.js";import"./rtl-36dd996b.js";import"./format-7389883c.js";import"./QLinearProgress-3da691dc.js";import"./QLayout-f9a4666d.js";import"./QAvatar-61289a0c.js";import"./TouchPan-cd2fd977.js";import"./uid-6a237b22.js";const K={class:"container"},X=A({__name:"List",setup(Y){const D=U(),c=u(!1),r=u([]),L=u(""),m=u(""),p=u(!1),n=u({sortBy:"desc",descending:!0,page:1,rowsPerPage:10,rowsNumber:0}),V=[{name:"index",label:"Номер",align:"left",field:"index",headerStyle:"font-size: 1.1em;"},{name:"fio",label:"ФИО",align:"left",field:"fio",headerStyle:"font-size: 1.1em;",sortable:!0,sort:(t,e)=>t.localeCompare(e)},{name:"buttons",label:"Действия",align:"center",field:"buttons",headerStyle:"font-size: 1.1em;"}],{f:z,loading:S}=J({fn:()=>B.deleteFormById(m.value).then(()=>{var t;x(),r.value=(t=r.value)==null?void 0:t.filter(e=>e._id!==m.value)}),alert:!0,successMsg:"Удалено"});q(()=>b({pagination:n.value}));async function b(t){try{c.value=!0;const{page:e,rowsPerPage:o,sortBy:i,descending:s}=t.pagination;if(i&&s!==n.value.descending){const $=s?(f,g)=>g[i].localeCompare(f[i]):(f,g)=>f[i].localeCompare(g[i]);r.value.sort($),n.value.descending=s,n.value.sortBy=i;return}const C=await B.catchHumansList({limit:o,page:e});r.value.splice(0,r.value.length,...C.data),n.value.descending=s,n.value.sortBy=i,n.value.page=e,n.value.rowsNumber=+C.headers["x-total-count"]}catch(e){console.log(e)}finally{c.value=!1}}function T(t){D.push({path:"/info",query:{search:t}})}function x(t){t&&(m.value=t),p.value=!p.value}return(t,e)=>(Q(),k(G,null,{default:l(()=>[R("div",K,[a(H,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=o=>p.value=o)},{default:l(()=>[a(N,{style:{padding:"10px","min-width":"250px"}},{default:l(()=>[a(P,{class:"text-h6 text-center"},{default:l(()=>[d("Вы уверены?")]),_:1}),a(F,{align:"between"},{default:l(()=>[a(h,{onClick:_(z),loading:_(S),color:"primary"},{default:l(()=>[d("Да")]),_:1},8,["onClick","loading"]),O((Q(),k(h,{color:"primary"},{default:l(()=>[d("Нет")]),_:1})),[[E]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(M,{class:"table",columns:V,rows:r.value,loading:c.value,"rows-per-page-options":[5],"pagination-label":(o,i,s)=>`${o}-${i} из ${s}`,filter:L.value,"binary-state-sort":"","no-data-label":"Ничего не найдено","row-key":"index",separator:"cell",title:"Полный список",pagination:n.value,"onUpdate:pagination":e[1]||(e[1]=o=>n.value=o),onRequest:b},{body:l(({row:o,rowIndex:i})=>[a(I,null,{default:l(()=>[a(v,{key:"name","auto-width":""},{default:l(()=>[d(w(i+1),1)]),_:2},1024),a(v,{key:"fio"},{default:l(()=>[d(w(o.fio),1)]),_:2},1024),a(v,{class:"item_btns",key:"buttons","auto-width":""},{default:l(()=>[a(y,{name:"content_copy",size:"20px",onClick:s=>_(W).copyTextToClipboard(o.fio)},null,8,["onClick"]),a(y,{name:"search",size:"20px",onClick:s=>T(o.fio.split(" ")[0])},null,8,["onClick"]),a(y,{name:"delete",size:"20px",onClick:s=>[x(o._id)]},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","loading","pagination-label","filter","pagination"])])]),_:1}))}});const De=j(X,[["__scopeId","data-v-e72f274e"]]);export{De as default};
