import{Q as I,b as F}from"./QCardSection-201bf33d.js";import{Q as h}from"./QBtn-206a322d.js";import{Q as M}from"./QCardActions-5df398c9.js";import{Q as N}from"./QDialog-f1efb6db.js";import{Q as U}from"./QInput-1fb1b323.js";import{Q as A,a as f,b as $}from"./QTable-f79a0c81.js";import{d as E,aw as P,r as i,n as j,w as q,c as b,b as o,o as _,f as R,e as t,g as n,k as s,E as G,a2 as C,Q as v,ax as J,a3 as K,a1 as O,_ as W}from"./index-bc2a6a68.js";import{Q as X}from"./QPagination-ae64a7c0.js";import{C as Y}from"./ClosePopup-39d118f1.js";import{H as Z}from"./HeaderLayout-1ec03175.js";import{u as Q}from"./use-key-composition-f57fabd4.js";import{A as k}from"./AssistanceService-b183ab80.js";import"./use-dark-0ee307ed.js";import"./use-prevent-scroll-086be4c1.js";import"./scroll-30449a35.js";import"./use-timeout-8cae4096.js";import"./TouchPan-c8cc902c.js";import"./selection-bfea8ef9.js";import"./format-7389883c.js";import"./use-tick-317d8d38.js";import"./focus-manager-e79c27be.js";import"./QList-542f1d61.js";import"./QMarkupTable-78cb69b9.js";import"./QCheckbox-013388ba.js";import"./QChip-527d45b6.js";import"./QItemLabel-2d25b108.js";import"./rtl-36dd996b.js";import"./QLinearProgress-449efc99.js";import"./QLayout-ff042225.js";import"./uid-6a237b22.js";const ee={class:"container"},te={key:0,style:{display:"flex","justify-content":"center","margin-top":"20px"}},ae=E({__name:"List",setup(oe){const V=[{name:"index",label:"Номер",align:"left",field:"index",headerStyle:"font-size: 1.1em;"},{name:"fio",label:"ФИО",align:"left",field:"fio",headerStyle:"font-size: 1.1em;",sortable:!0,sort:(e,a)=>e.localeCompare(a)},{name:"buttons",label:"Действия",align:"center",field:"buttons",headerStyle:"font-size: 1.1em;"}],w=P(),r=i(1),m=i(""),d=i(0),y=i(10),c=i(""),u=i(!1),L=j(()=>{var e;return(e=p.value)==null?void 0:e.filter(a=>a.fio.toLowerCase().includes(m.value.toLowerCase()))}),{f:D,loading:z}=Q({fn:()=>k.deleteFormById(c.value).then(()=>{var e;g(),p.value=(e=p.value)==null?void 0:e.filter(a=>a._id!==c.value)}),alert:!0,successMsg:"Удалено"}),{f:B,data:p,loading:S}=Q({fn:()=>k.catchHumansList({limit:y.value,page:r.value}).then(e=>(d.value=Math.ceil(+e.headers["x-total-count"]/y.value),e))});q(r,()=>{B()},{immediate:!0});function g(e){e&&(c.value=e),u.value=!u.value}function T(e){w.push({path:"/info",query:{search:e}})}return(e,a)=>(_(),b(Z,null,{default:o(()=>[R("div",ee,[t(N,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=l=>u.value=l)},{default:o(()=>[t(I,{style:{padding:"10px","min-width":"250px"}},{default:o(()=>[t(F,{class:"text-h6 text-center"},{default:o(()=>[n("Вы уверены?")]),_:1}),t(M,{align:"between"},{default:o(()=>[t(h,{onClick:s(D),loading:s(z),color:"primary"},{default:o(()=>[n("Да")]),_:1},8,["onClick","loading"]),G((_(),b(h,{color:"primary"},{default:o(()=>[n("Нет")]),_:1})),[[Y]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(U,{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=l=>m.value=l),outlined:"",label:"Поиск",style:{"margin-top":"20px"}},null,8,["modelValue"]),t($,{class:"table",rows:s(L),columns:V,"binary-state-sort":"",separator:"cell","row-key":"index","hide-pagination":"",loading:s(S),"no-data-label":"Ничего не найдено"},{body:o(({row:l,rowIndex:H})=>[t(A,null,{default:o(()=>[t(f,{key:"name","auto-width":""},{default:o(()=>[n(C(H+1),1)]),_:2},1024),t(f,{key:"fio"},{default:o(()=>[n(C(l.fio),1)]),_:2},1024),t(f,{class:"item_btns",key:"buttons","auto-width":""},{default:o(()=>[t(v,{name:"content_copy",size:"20px",onClick:x=>s(J).copyTextToClipboard(l.fio)},null,8,["onClick"]),t(v,{name:"search",size:"20px",onClick:x=>T(l.fio.split(" ")[0])},null,8,["onClick"]),t(v,{name:"delete",size:"20px",onClick:x=>[g(l._id)]},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","loading"]),d.value>1?(_(),K("div",te,[t(X,{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=l=>r.value=l),max:d.value,"direction-links":"",flat:"",color:"grey","active-color":"primary"},null,8,["modelValue","max"])])):O("",!0)])]),_:1}))}});const Ie=W(ae,[["__scopeId","data-v-73e26cd3"]]);export{Ie as default};
