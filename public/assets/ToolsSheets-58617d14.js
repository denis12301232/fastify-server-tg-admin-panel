import{Q as Qe}from"./QOptionGroup-03b35cb3.js";import{Q as je}from"./QCheckbox-1ab8c3b3.js";import{m as ge,n as l,q as h,X as Ke,r as T,D as Xe,W as Ge,ay as Ue,a8 as le,F as We,v as ke,w as He,Y as Ye,d as Je,a as Ze,a3 as U,e as K,k as D,a1 as ne,b as be,h as ea,o as W,a4 as aa,g as fe,a2 as xe,p as ta,i as la,f as re,_ as na}from"./index-a6dc8171.js";import{T as ra}from"./TouchPan-41324eba.js";import{b as oa,a as ia,c as ua,e as sa,u as ca}from"./use-key-composition-071fe8ed.js";import{b as $}from"./format-7389883c.js";import{Q as va}from"./QBtn-eca63939.js";import{A as ma}from"./AssistanceService-17021dde.js";import"./QChip-82092aed.js";import"./selection-bbadb42a.js";import"./QItemLabel-c980274b.js";import"./use-prevent-scroll-f29c8a88.js";import"./scroll-4751b4b4.js";import"./QDialog-eee8cc91.js";import"./use-timeout-4d28e583.js";import"./use-tick-8ab3fbd8.js";import"./focus-manager-e79c27be.js";import"./rtl-36dd996b.js";import"./uid-6a237b22.js";const da=["top","middle","bottom"],ba=ge({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:a=>da.includes(a)}},setup(a,{slots:f}){const d=l(()=>a.align!==void 0?{verticalAlign:a.align}:null),n=l(()=>{const e=a.outline===!0&&a.color||a.textColor;return`q-badge flex inline items-center no-wrap q-badge--${a.multiLine===!0?"multi":"single"}-line`+(a.outline===!0?" q-badge--outline":a.color!==void 0?` bg-${a.color}`:"")+(e!==void 0?` text-${e}`:"")+(a.floating===!0?" q-badge--floating":"")+(a.rounded===!0?" q-badge--rounded":"")+(a.transparent===!0?" q-badge--transparent":"")});return()=>h("div",{class:n.value,style:d.value,role:"status","aria-label":a.label},Ke(f.default,a.label!==void 0?[a.label]:[]))}}),he="q-slider__marker-labels",fa=a=>({value:a}),xa=({marker:a})=>h("div",{key:a.value,style:a.style,class:a.classes},a.label),Me=[34,37,40,33,39,38],ha={...ia,...ua,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:a=>a>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},ga=["pan","update:modelValue","change"];function ka({updateValue:a,updatePosition:f,getDragging:d,formAttrs:n}){const{props:e,emit:I,slots:S,proxy:{$q:L}}=ke(),o=oa(e,L),k=sa(n),C=T(!1),g=T(!1),y=T(!1),A=T(!1),R=l(()=>e.vertical===!0?"--v":"--h"),H=l(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),p=l(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(L.lang.rtl===!0)),V=l(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),q=l(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),w=l(()=>e.disable!==!0&&e.readonly!==!0&&V.value<q.value),P=l(()=>(String(e.step).trim().split(".")[1]||"").length),X=l(()=>e.step===0?1:e.step),Y=l(()=>w.value===!0?e.tabindex||0:-1),z=l(()=>e.max-e.min),Q=l(()=>q.value-V.value),E=l(()=>J(V.value)),j=l(()=>J(q.value)),O=l(()=>e.vertical===!0?p.value===!0?"bottom":"top":p.value===!0?"right":"left"),s=l(()=>e.vertical===!0?"height":"width"),i=l(()=>e.vertical===!0?"width":"height"),b=l(()=>e.vertical===!0?"vertical":"horizontal"),v=l(()=>{const t={role:"slider","aria-valuemin":V.value,"aria-valuemax":q.value,"aria-orientation":b.value,"data-step":e.step};return e.disable===!0?t["aria-disabled"]="true":e.readonly===!0&&(t["aria-readonly"]="true"),t}),M=l(()=>`q-slider q-slider${R.value} q-slider--${C.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(w.value===!0?" q-slider--editable":""))+(y.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(o.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+R.value:""));function B(t){const r="q-slider__"+t;return`${r} ${r}${R.value} ${r}${R.value}${H.value}`}function m(t){const r="q-slider__"+t;return`${r} ${r}${R.value}`}const _=l(()=>{const t=e.selectionColor||e.color;return"q-slider__selection absolute"+(t!==void 0?` text-${t}`:"")}),G=l(()=>m("markers")+" absolute overflow-hidden"),Ce=l(()=>m("track-container")),ye=l(()=>B("pin")),Se=l(()=>B("label")),Re=l(()=>B("text-container")),_e=l(()=>B("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),$e=l(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),Te=l(()=>{const t={[i.value]:e.trackSize};return e.trackImg!==void 0&&(t.backgroundImage=`url(${e.trackImg}) !important`),t}),Le=l(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),ie=l(()=>{const t={[O.value]:`${100*E.value}%`,[s.value]:`${100*(j.value-E.value)}%`};return e.innerTrackImg!==void 0&&(t.backgroundImage=`url(${e.innerTrackImg}) !important`),t});function pe(t){const{min:r,max:u,step:c}=e;let x=r+t*(u-r);if(c>0){const F=(x-r)%c;x+=(Math.abs(F)>=c/2?(F<0?-1:1)*c:0)-F}return P.value>0&&(x=parseFloat(x.toFixed(P.value))),$(x,V.value,q.value)}function J(t){return z.value===0?0:(t-e.min)/z.value}function Ve(t,r){const u=Ge(t),c=e.vertical===!0?$((u.top-r.top)/r.height,0,1):$((u.left-r.left)/r.width,0,1);return $(p.value===!0?1-c:c,E.value,j.value)}const ue=l(()=>Ue(e.markers)===!0?e.markers:X.value),se=l(()=>{const t=[],r=ue.value,u=e.max;let c=e.min;do t.push(c),c+=r;while(c<u);return t.push(u),t}),ce=l(()=>{const t=` ${he}${R.value}-`;return he+`${t}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${t}${p.value===!0?"rtl":"ltr"}`}),Z=l(()=>e.markerLabels===!1?null:qe(e.markerLabels).map((t,r)=>({index:r,value:t.value,label:t.label||t.value,classes:ce.value+(t.classes!==void 0?" "+t.classes:""),style:{...me(t.value),...t.style||{}}}))),ve=l(()=>({markerList:Z.value,markerMap:we.value,classes:ce.value,getStyle:me})),Be=l(()=>{if(Q.value!==0){const t=100*ue.value/Q.value;return{...ie.value,backgroundSize:e.vertical===!0?`2px ${t}%`:`${t}% 2px`}}return null});function qe(t){if(t===!1)return null;if(t===!0)return se.value.map(fa);if(typeof t=="function")return se.value.map(u=>{const c=t(u);return le(c)===!0?{...c,value:u}:{value:u,label:c}});const r=({value:u})=>u>=e.min&&u<=e.max;return Array.isArray(t)===!0?t.map(u=>le(u)===!0?u:{value:u}).filter(r):Object.keys(t).map(u=>{const c=t[u],x=Number(u);return le(c)===!0?{...c,value:x}:{value:x,label:c}}).filter(r)}function me(t){return{[O.value]:`${100*(t-e.min)/z.value}%`}}const we=l(()=>{if(e.markerLabels===!1)return null;const t={};return Z.value.forEach(r=>{t[r.value]=r}),t});function Fe(){if(S["marker-label-group"]!==void 0)return S["marker-label-group"](ve.value);const t=S["marker-label"]||xa;return Z.value.map(r=>t({marker:r,...ve.value}))}const Ne=l(()=>[[ra,Ie,void 0,{[b.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Ie(t){t.isFinal===!0?(A.value!==void 0&&(f(t.evt),t.touch===!0&&a(!0),A.value=void 0,I("pan","end")),C.value=!1,y.value=!1):t.isFirst===!0?(A.value=d(t.evt),f(t.evt),a(),C.value=!0,I("pan","start")):(f(t.evt),a())}function de(){y.value=!1}function Ae(t){f(t,d(t)),a(),g.value=!0,C.value=!0,document.addEventListener("mouseup",ee,!0)}function ee(){g.value=!1,C.value=!1,a(!0),de(),document.removeEventListener("mouseup",ee,!0)}function Oe(t){f(t,d(t)),a(!0)}function De(t){Me.includes(t.keyCode)&&a(!0)}function ze(t){if(e.vertical===!0)return null;const r=L.lang.rtl!==e.reverse?1-t:t;return{transform:`translateX(calc(${2*r-1} * ${e.thumbSize} / 2 + ${50-100*r}%))`}}function Ee(t){const r=l(()=>g.value===!1&&(y.value===t.focusValue||y.value==="both")?" q-slider--focus":""),u=l(()=>`q-slider__thumb q-slider__thumb${R.value} q-slider__thumb${R.value}-${p.value===!0?"rtl":"ltr"} absolute non-selectable`+r.value+(t.thumbColor.value!==void 0?` text-${t.thumbColor.value}`:"")),c=l(()=>({width:e.thumbSize,height:e.thumbSize,[O.value]:`${100*t.ratio.value}%`,zIndex:y.value===t.focusValue?2:void 0})),x=l(()=>t.labelColor.value!==void 0?` text-${t.labelColor.value}`:""),F=l(()=>ze(t.ratio.value)),ae=l(()=>"q-slider__text"+(t.labelTextColor.value!==void 0?` text-${t.labelTextColor.value}`:""));return()=>{const te=[h("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[h("path",{d:e.thumbPath})]),h("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(te.push(h("div",{class:ye.value+" absolute fit no-pointer-events"+x.value},[h("div",{class:Se.value,style:{minWidth:e.thumbSize}},[h("div",{class:Re.value,style:F.value},[h("span",{class:ae.value},t.label.value)])])])),e.name!==void 0&&e.disable!==!0&&k(te,"push")),h("div",{class:u.value,style:c.value,...t.getNodeData()},te)}}function Pe(t,r,u,c){const x=[];e.innerTrackColor!=="transparent"&&x.push(h("div",{key:"inner",class:Le.value,style:ie.value})),e.selectionColor!=="transparent"&&x.push(h("div",{key:"selection",class:_.value,style:t.value})),e.markers!==!1&&x.push(h("div",{key:"marker",class:G.value,style:Be.value})),c(x);const F=[We("div",{key:"trackC",class:Ce.value,tabindex:r.value,...u.value},[h("div",{class:$e.value,style:Te.value},x)],"slide",w.value,()=>Ne.value)];if(e.markerLabels!==!1){const ae=e.switchMarkerLabelsSide===!0?"unshift":"push";F[ae](h("div",{key:"markerL",class:_e.value},Fe()))}return F}return Xe(()=>{document.removeEventListener("mouseup",ee,!0)}),{state:{active:C,focus:y,preventFocus:g,dragging:A,editable:w,classes:M,tabindex:Y,attributes:v,step:X,decimals:P,trackLen:z,innerMin:V,innerMinRatio:E,innerMax:q,innerMaxRatio:j,positionProp:O,sizeProp:s,isReversed:p},methods:{onActivate:Ae,onMobileClick:Oe,onBlur:de,onKeyup:De,getContent:Pe,getThumbRenderFn:Ee,convertRatioToModel:pe,convertModelToRatio:J,getDraggingRatio:Ve}}}const N={MIN:0,RANGE:1,MAX:2},Ma=ge({name:"QRange",props:{...ha,modelValue:{type:Object,default:()=>({min:null,max:null}),validator:a=>"min"in a&&"max"in a},dragRange:Boolean,dragOnlyRange:Boolean,leftLabelColor:String,leftLabelTextColor:String,rightLabelColor:String,rightLabelTextColor:String,leftLabelValue:[String,Number],rightLabelValue:[String,Number],leftThumbColor:String,rightThumbColor:String},emits:ga,setup(a,{emit:f}){const{proxy:{$q:d}}=ke(),{state:n,methods:e}=ka({updateValue:Q,updatePosition:j,getDragging:E,formAttrs:l(()=>({type:"hidden",name:a.name,value:`${a.modelValue.min}|${a.modelValue.max}`}))}),I=T(null),S=T(0),L=T(0),o=T({min:0,max:0});function k(){o.value.min=a.modelValue.min===null?n.innerMin.value:$(a.modelValue.min,n.innerMin.value,n.innerMax.value),o.value.max=a.modelValue.max===null?n.innerMax.value:$(a.modelValue.max,n.innerMin.value,n.innerMax.value)}He(()=>`${a.modelValue.min}|${a.modelValue.max}|${n.innerMin.value}|${n.innerMax.value}`,k),k();const C=l(()=>e.convertModelToRatio(o.value.min)),g=l(()=>e.convertModelToRatio(o.value.max)),y=l(()=>n.active.value===!0?S.value:C.value),A=l(()=>n.active.value===!0?L.value:g.value),R=l(()=>{const s={[n.positionProp.value]:`${100*y.value}%`,[n.sizeProp.value]:`${100*(A.value-y.value)}%`};return a.selectionImg!==void 0&&(s.backgroundImage=`url(${a.selectionImg}) !important`),s}),H=l(()=>{if(n.editable.value!==!0)return{};if(d.platform.is.mobile===!0)return{onClick:e.onMobileClick};const s={onMousedown:e.onActivate};return(a.dragRange===!0||a.dragOnlyRange===!0)&&Object.assign(s,{onFocus:()=>{n.focus.value="both"},onBlur:e.onBlur,onKeydown:O,onKeyup:e.onKeyup}),s});function p(s){return d.platform.is.mobile!==!0&&n.editable.value===!0&&a.dragOnlyRange!==!0?{onFocus:()=>{n.focus.value=s},onBlur:e.onBlur,onKeydown:O,onKeyup:e.onKeyup}:{}}const V=l(()=>a.dragOnlyRange!==!0?n.tabindex.value:null),q=l(()=>d.platform.is.mobile!==!0&&(a.dragRange||a.dragOnlyRange===!0)?n.tabindex.value:null),w=T(null),P=l(()=>p("min")),X=e.getThumbRenderFn({focusValue:"min",getNodeData:()=>({ref:w,key:"tmin",...P.value,tabindex:V.value}),ratio:y,label:l(()=>a.leftLabelValue!==void 0?a.leftLabelValue:o.value.min),thumbColor:l(()=>a.leftThumbColor||a.thumbColor||a.color),labelColor:l(()=>a.leftLabelColor||a.labelColor),labelTextColor:l(()=>a.leftLabelTextColor||a.labelTextColor)}),Y=l(()=>p("max")),z=e.getThumbRenderFn({focusValue:"max",getNodeData:()=>({...Y.value,key:"tmax",tabindex:V.value}),ratio:A,label:l(()=>a.rightLabelValue!==void 0?a.rightLabelValue:o.value.max),thumbColor:l(()=>a.rightThumbColor||a.thumbColor||a.color),labelColor:l(()=>a.rightLabelColor||a.labelColor),labelTextColor:l(()=>a.rightLabelTextColor||a.labelTextColor)});function Q(s){(o.value.min!==a.modelValue.min||o.value.max!==a.modelValue.max)&&f("update:modelValue",{...o.value}),s===!0&&f("change",{...o.value})}function E(s){const{left:i,top:b,width:v,height:M}=I.value.getBoundingClientRect(),B=a.dragOnlyRange===!0?0:a.vertical===!0?w.value.offsetHeight/(2*M):w.value.offsetWidth/(2*v),m={left:i,top:b,width:v,height:M,valueMin:o.value.min,valueMax:o.value.max,ratioMin:C.value,ratioMax:g.value},_=e.getDraggingRatio(s,m);return a.dragOnlyRange!==!0&&_<m.ratioMin+B?m.type=N.MIN:a.dragOnlyRange===!0||_<m.ratioMax-B?a.dragRange===!0||a.dragOnlyRange===!0?(m.type=N.RANGE,Object.assign(m,{offsetRatio:_,offsetModel:e.convertRatioToModel(_),rangeValue:m.valueMax-m.valueMin,rangeRatio:m.ratioMax-m.ratioMin})):m.type=m.ratioMax-_<_-m.ratioMin?N.MAX:N.MIN:m.type=N.MAX,m}function j(s,i=n.dragging.value){let b;const v=e.getDraggingRatio(s,i),M=e.convertRatioToModel(v);switch(i.type){case N.MIN:v<=i.ratioMax?(b={minR:v,maxR:i.ratioMax,min:M,max:i.valueMax},n.focus.value="min"):(b={minR:i.ratioMax,maxR:v,min:i.valueMax,max:M},n.focus.value="max");break;case N.MAX:v>=i.ratioMin?(b={minR:i.ratioMin,maxR:v,min:i.valueMin,max:M},n.focus.value="max"):(b={minR:v,maxR:i.ratioMin,min:M,max:i.valueMin},n.focus.value="min");break;case N.RANGE:const B=v-i.offsetRatio,m=$(i.ratioMin+B,0,1-i.rangeRatio),_=M-i.offsetModel,G=$(i.valueMin+_,a.min,a.max-i.rangeValue);b={minR:m,maxR:m+i.rangeRatio,min:parseFloat(G.toFixed(n.decimals.value)),max:parseFloat((G+i.rangeValue).toFixed(n.decimals.value))},n.focus.value="both";break}o.value=o.value.min===null||o.value.max===null?{min:b.min||a.min,max:b.max||a.max}:{min:b.min,max:b.max},a.snap!==!0||a.step===0?(S.value=b.minR,L.value=b.maxR):(S.value=e.convertModelToRatio(o.value.min),L.value=e.convertModelToRatio(o.value.max))}function O(s){if(!Me.includes(s.keyCode))return;Ye(s);const i=([34,33].includes(s.keyCode)?10:1)*n.step.value,b=([34,37,40].includes(s.keyCode)?-1:1)*(n.isReversed.value===!0?-1:1)*(a.vertical===!0?-1:1)*i;if(n.focus.value==="both"){const v=o.value.max-o.value.min,M=$(parseFloat((o.value.min+b).toFixed(n.decimals.value)),n.innerMin.value,n.innerMax.value-v);o.value={min:M,max:parseFloat((M+v).toFixed(n.decimals.value))}}else{if(n.focus.value===!1)return;{const v=n.focus.value;o.value={...o.value,[v]:$(parseFloat((o.value[v]+b).toFixed(n.decimals.value)),v==="min"?n.innerMin.value:o.value.min,v==="max"?n.innerMax.value:o.value.max)}}}Q()}return()=>{const s=e.getContent(R,q,H,i=>{i.push(X(),z())});return h("div",{ref:I,class:"q-range "+n.classes.value+(a.modelValue.min===null||a.modelValue.max===null?" q-slider--no-value":""),...n.attributes.value,"aria-valuenow":a.modelValue.min+"|"+a.modelValue.max},s)}}}),oe=a=>(ta("data-v-c209e524"),a=a(),la(),a),Ca=oe(()=>re("h5",{class:"title"},"Критерии выгрузки",-1)),ya={key:0,class:"group"},Sa=oe(()=>re("h6",null,"Выберите район",-1)),Ra={key:1,class:"group"},_a=oe(()=>re("h6",null,"Выберите интервал",-1)),$a=["href"],Ta=Je({__name:"ToolsSheets",setup(a){const f=T([]),d=Ze({district:"",birth:{min:1920,max:2022}}),n=l(()=>!!(f.value.includes("district")&&d.district||f.value.includes("birth"))),{f:e,loading:I,data:S}=ca({fn:()=>ma.saveFormsToSheet({district:d.district,birth:{from:d.birth.min,to:d.birth.max}}),successMsg:"Сформировано",errorMsg:"Ничего не найдено по запросу",alert:!0}),L=[{label:"По району",value:"district"},{label:"По году",value:"birth"}];return(o,k)=>{var C;return W(),U("form",{class:"form",onSubmit:k[3]||(k[3]=ea((...g)=>D(e)&&D(e)(...g),["prevent"]))},[Ca,K(Qe,{class:"criterias",type:"checkbox",modelValue:f.value,"onUpdate:modelValue":k[0]||(k[0]=g=>f.value=g),options:L},null,8,["modelValue"]),f.value.includes("district")?(W(),U("div",ya,[Sa,K(je,{modelValue:d.district,"onUpdate:modelValue":k[1]||(k[1]=g=>d.district=g),options:D(aa).districts,outlined:"",label:"Район"},null,8,["modelValue","options"])])):ne("",!0),f.value.includes("birth")?(W(),U("div",Ra,[_a,K(ba,{color:"secondary"},{default:be(()=>[fe("С "+xe(d.birth.min)+" по "+xe(d.birth.max),1)]),_:1}),K(Ma,{modelValue:d.birth,"onUpdate:modelValue":k[2]||(k[2]=g=>d.birth=g),min:1920,max:2022},null,8,["modelValue"])])):ne("",!0),K(va,{class:"button",color:"primary",type:"submit",loading:D(I),disable:!D(n)},{default:be(()=>[fe("Сохранить")]),_:1},8,["loading","disable"]),(C=D(S))!=null&&C.link?(W(),U("a",{key:2,class:"link",target:"_blank",href:D(S).link},"Ссылка на выгруженные заявки",8,$a)):ne("",!0)],32)}}});const Ga=na(Ta,[["__scopeId","data-v-c209e524"]]);export{Ga as default};
